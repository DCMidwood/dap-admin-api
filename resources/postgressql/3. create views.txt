-- public.vdap_project_workpack source

CREATE OR REPLACE VIEW public.vdap_project_workpack
AS SELECT row_number() OVER (ORDER BY dw.uid) AS uid,
    dw.uid AS workpack_id,
    dw.workpack_name,
    dw.workpack_extent,
    dp.uid AS project_id,
    dp.project_name,
    dp.project_db
   FROM dap_workpack dw
     JOIN dap_project dp ON dw.project_id = dp.uid;

-- public.vdap_workpack_detail source

CREATE OR REPLACE VIEW public.vdap_workpack_detail
AS SELECT row_number() OVER (ORDER BY dw.uid) AS uid,
    dw.uid AS workpack_id,
    dw.workpack_name,
    dw.workpack_extent,
    dp.uid AS project_id,
    dp.project_name,
    dp.project_db,
    du.uid AS user_id,
    du.user_name,
    du.user_email,
    dr.uid AS role_id,
    dr.role_name,
    dr.role_level
   FROM dap_workpack dw
     JOIN dap_project dp ON dw.project_id = dp.uid
     JOIN workpack_user_role wur ON dw.uid = wur.workpack_id
     JOIN dap_user du ON du.uid = wur.user_id
     JOIN dap_role dr ON dr.uid = wur.role_id;